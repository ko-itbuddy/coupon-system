# 실습으로 배우는 선착순 이벤트 시스템
선착순 이벤트 시스템을 구현할 때 어떤 문제가 발생할 수 있고 어떻게 해결할 수 있는지 배워봅니다.

- 원하던 수량보다 쿠폰이 많이 발급됐어요.
  원인은 뭐고, 어떻게 해결해야 하나요?
- 많은 요청이 들어오면 에러가 발생해요.
  어떻게 사전에 대비할 수 있을까요?

# Race Condition
경쟁 조건 또는 경쟁 위험은 시스템의 실질적인 동작이 다른 제어 불가능한 이벤트의 순서 또는 타이밍에 따라 달라지는 전자 장치, 소프트웨어 또는 기타 시스템의 조건으로, 예상치 못한 또는 일관되지 않은 결과를 초래합니다. 가능한 동작 중 하나 이상이 바람직하지 않을 때 버그가 됩니다.

## example
|  	| Thread1 	| Thread2 	| stock 	|
|---	|---	|---	|---	|
| 1 	| read stock 	|  	| 10 	|
| 2 	| order stock 1 	|  	| 10 	|
| 3 	|  	| read stock 	| 10 	|
| 4 	|  	| order stock 1 	| 10 	|
| 5 	|  	| save stock 	| 9 	|
| 6 	| save stock 	|  	| 9 	|



# Redis를 이용한 락
- Redis INCR 명령어
  - 키에 대한 벨류를 1씩 증가시키는 명령어.
  - Redis는 싱글스레드 기반으로 동작하여 Race Condition을 잘 해결함
  - INCR은 성능도 굉장히 빠른 명령어.

